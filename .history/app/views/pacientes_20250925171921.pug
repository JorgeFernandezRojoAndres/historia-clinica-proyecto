extends layout

block content
  link(rel="stylesheet", href="/css/paciente.css")

  .container.mt-4
    .d-flex.justify-content-between.align-items-center.mb-3
      h1.mb-0.text-center.p-2.rounded.shadow-sm.bg-light Listado de Pacientes
      a.btn.btn-success.shadow-sm(href="/secretaria/pacientes/new")
        i.bi.bi-plus-lg.me-1
        | Nuevo Paciente

    form#formBuscarPaciente.mb-3(role="search", onsubmit="return false")
      .input-group
        input.form-control#buscarPaciente(type="text" name="query" placeholder="Buscar paciente por nombre")
        button.btn.btn-outline-primary(type="submit")
          i.bi.bi-search

    .table-responsive.shadow-sm.rounded
      table.table.table-striped.table-hover.align-middle
        thead.table-dark
          tr
            th Nombre
            th Fecha de Nacimiento
            th DNI
            th Dirección
            th Teléfono
            th.text-center Acciones
        tbody#tablaPacientes
          if pacientes.length === 0
            tr
              td.text-center(colspan="6") No hay pacientes registrados.
          else
            each paciente in pacientes
              tr
                td= paciente.nombre
                td= paciente.fechaNacimiento
                td= paciente.dni
                td= paciente.direccion
                td= paciente.telefono
                td.text-center
                  .btn-group(role="group")
                    a.btn.btn-sm.btn-warning(href=`/secretaria/pacientes/${paciente.idPaciente}/edit`)
                      i.bi.bi-pencil
                      |  Editar
                    a.btn.btn-sm.btn-info(href=`/historias/${paciente.idPaciente}`)
                      i.bi.bi-journal-text
                      |  Historial
                    form.d-inline(action=`/secretaria/pacientes/${paciente.idPaciente}/delete?_method=DELETE` method="POST" onsubmit="return confirm('¿Estás seguro de que deseas eliminar a este paciente?');")
                      button.btn.btn-sm.btn-danger(type="submit")
                        i.bi.bi-trash
                        |  Eliminar

  script(src="/js/searchPaciente.js")
